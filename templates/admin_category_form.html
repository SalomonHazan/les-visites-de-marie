{% extends "base.html" %}
{% block title %}Nouvelle Cat√©gorie - {{ config.site_title }}{% endblock %}
{% block content %}
<div class="admin-form-container">
    <div class="admin-form-header">
        <h2>‚ûï Nouvelle Cat√©gorie</h2>
        <a href="{{ url_for('menu_page', menu_id=menu_id) }}" class="btn btn-secondary">‚Üê Retour au menu</a>
    </div>
    
    <form method="POST" action="{{ url_for('admin_create_category', menu_id=menu_id) }}" class="admin-form">
        <div class="form-section">
            <h3>Informations de la cat√©gorie</h3>
            
            <div class="form-group">
                <label for="nom">Nom de la cat√©gorie *</label>
                <input type="text" id="nom" name="nom" required>
                <small>Le nom qui sera affich√© sur la carte de cat√©gorie</small>
            </div>
            
            <div class="form-group">
                <label for="description">Description *</label>
                <textarea id="description" name="description" rows="3" required></textarea>
                <small>Une br√®ve description de la cat√©gorie</small>
            </div>
            
            <div class="form-group">
                <label for="icon">Ic√¥ne</label>
                <input type="text" id="icon" name="icon" value="üìÅ" maxlength="2">
                <small>Une ic√¥ne emoji pour repr√©senter la cat√©gorie (ex: üèõÔ∏è, üé≠, üìö)</small>
            </div>
            
            <div class="form-group">
                <label for="category_id">Identifiant technique</label>
                <input type="text" id="category_id" name="category_id" pattern="[a-z0-9_-]+">
                <small>Identifiant unique pour la cat√©gorie (optionnel, sera g√©n√©r√© automatiquement si vide)</small>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Cr√©er la cat√©gorie</button>
            <a href="{{ url_for('menu_page', menu_id=menu_id) }}" class="btn btn-secondary">Annuler</a>
        </div>
    </form>
</div>

<script>
// G√©n√©rer automatiquement l'ID technique √† partir du nom
document.getElementById('nom').addEventListener('input', function() {
    const nom = this.value;
    const categoryId = nom.toLowerCase()
        .replace(/[√©√®√™√´]/g, 'e')
        .replace(/[√†√¢√§]/g, 'a')
        .replace(/[√Æ√Ø]/g, 'i')
        .replace(/[√¥√∂]/g, 'o')
        .replace(/[√ª√º√π]/g, 'u')
        .replace(/[√ß]/g, 'c')
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '_')
        .replace(/-+/g, '_');
    
    document.getElementById('category_id').value = categoryId;
});
</script>
{% endblock %} 